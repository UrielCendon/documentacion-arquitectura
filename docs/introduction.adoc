= Documento de Diseño — Sistema de Reservaciones Centralizado

== 1.1 Visión del Sistema
Hoy la cadena opera con múltiples soluciones locales por hotel. Ese esquema fragmentado provoca datos inconsistentes, cobros y reservaciones duplicadas, reglas que cambian de un lugar a otro y una experiencia de huésped poco predecible. Además, complica la toma de decisiones: es difícil ver la ocupación real, ajustar tarifas de forma coordinada o aplicar políticas comunes sin fricción. El impacto no es menor: pérdidas económicas, esfuerzo operativo extra, riesgos reputacionales y freno a la innovación.

La propuesta es construir un sistema centralizado, confiable y escalable que unifique la gestión de reservaciones, tarifas e inventarios para más de 5,000 hoteles (aprox. 1,000,000 de habitaciones). La plataforma brindará a los huéspedes procesos simples y seguros para reservar en tiempo real; al personal operativo, herramientas claras para check-in, check-out y cambios de habitación; y a la administración, control total sobre políticas y métricas clave del negocio.

Este sistema no es solo “otra herramienta”: se concibe como un activo estratégico. Con la centralización se habilitan capacidades como precios dinámicos basados en demanda, temporada u ocupación; un overbooking controlado (hasta 10% por tipo de habitación y fecha) para compensar cancelaciones o inasistencias; y trazabilidad de punta a punta para auditar cada operación. Así se reducen errores, se optimizan ingresos y se gana agilidad para lanzar mejoras sin reconfigurar sitio por sitio.

La experiencia del usuario es prioridad. La reservación deberá completarse en un flujo corto (máximo cinco pasos), con mensajes claros y recuperables ante errores. También se cuidará la consistencia entre lo que se muestra y lo que se cobra: el precio ofrecido en el momento de reservar será el precio final al confirmar. En lo técnico, se favorecerán decisiones que mantengan la coherencia transaccional en escenarios de alta concurrencia, priorizando “acertar” antes que “acelerar y fallar”.

== 1.2 Alcance
La versión inicial (v1) se enfoca en entregar un núcleo robusto, trazable y usable. Incluye lo indispensable para operar reservas de punta a punta, gestionar inventario/tarifas y soportar la operación diaria en recepción. Funcionalidades complementarias como programas de lealtad o integraciones externas se evaluarán en fases posteriores.

=== 1.2.1 Funcionalidades incluidas (v1)
- **Consulta de disponibilidad en tiempo real** de habitaciones y tarifas, con información precisa y actualizada.
- **Gestión de estancias**: check-in, check-out y cambio de habitación con control de ocupación.
- **Reservación con pago completo** y **cancelación con penalización** según política vigente.
- **Precios dinámicos** como optimización del negocio y mejora ante otros sistemas.
- **Operaciones basicas** para catálogos de hoteles, tipos de habitación, habitaciones, personal y reglas de negocio.
- **Trazabilidad completa** de operaciones relevantes (auditoría, seguridad y cumplimiento).
- **Registro de consumos y servicios adicionales** durante la estancia (por ejemplo, alimentos o extras).
- **Administración de inventario y tarifas** (altas, bajas y modificaciones) con bitácora de cambios.
- **Gestión de overbooking** (hasta 10% por tipo de habitación y fecha), con reglas auditable.


=== 1.2.2 Fuera de alcance (v1)
- **Reporte de problemas y sanciones internas** del huésped o del personal.
- **Integraciones con otros sistemas hoteleros/OTAs** para redistribuir demanda por falta de disponibilidad.
- **Descuentos/promociones personalizadas** y **programas de fidelidad** (membresías, puntos, beneficios).

=== 1.2.3 Limitaciones y restricciones
- **Política de pago**: 100% del total al confirmar la reservación (no hay anticipos parciales).
- **Overbooking**: máximo **10%** por tipo de habitación y fecha, definido centralmente.
- **Experiencia de reserva**: máximo **5 pasos** (≤5 clics) desde búsqueda hasta confirmación.
- **Consistencia de precios**: el precio mostrado al iniciar la reserva se respeta hasta la confirmación dentro de la sesión.

=== 1.2.4 Suposiciones y dependencias
- **Pasarela de pago confiable** con autorización/captura, manejo de reintentos e idempotencia para evitar cargos duplicados.
- **Políticas de negocio definidas** (cancelaciones, cambios, ventanas de tiempo) provistas por la administración antes de la salida a producción.
- **Cargas operativas** estimadas (QPS/TPS) sujetas a revisión con telemetría para ajustar capacidad.

=== 1.2.5 Requisitos no funcionales (resumen)
- **Usabilidad**: la reserva debe completarse en ≤5 pasos, con mensajes comprensibles, validaciones en línea y rutas de recuperación claras. Buscamos que personal nuevo en recepción complete tareas clave tras una inducción breve y que los huéspedes entiendan “qué sigue” sin instrucciones externas. 
- **Rendimiento y capacidad**: confirmación de reservación con latencias estables aun en picos; búsquedas de disponibilidad con tiempos acotados y cachés/estrategias de lectura adecuadas. Objetivo de respuesta rápida sin sacrificar integridad.
- **Disponibilidad y resiliencia**: degradación controlada ante picos; recuperación rápida ante fallos parciales.
- **Rendimiento**: confirmación de reservación rápida y estable; búsquedas de disponibilidad con latencias acotadas.
- **Seguridad**: cifrado en tránsito y en reposo, mínimos privilegios, rotación de secretos, cumplimiento normativo local y de pagos.
- **Observabilidad**: métricas, trazas de extremo a extremo y logs correlacionados por transacción para auditar y diagnosticar.
- **Mantenibilidad**: arquitectura modular y estándares claros de calidad para facilitar evolución y soporte.

== 1.3 Audiencia del documento
Este documento está dirigido a los grupos que intervienen en la definición, uso u operación del sistema. Cada grupo encontrará aquí una guía clara de qué esperar y qué se espera de él.

- **Administración de la cadena**: Necesita una vista centralizada para manejar el inventario, tarifas y políticas (incluido el overbooking). Su objetivo es maximizar el rendimiento de estos, asi como reducir costos y tiempos.

- **Huéspedes / Clientes**: Usuarios finales que reservan, pagan y cancelan a través de web o app. Buscan claridad, seguridad y pasos mínimos(No tendran accesso a este pero si participan en su desarrollo).

- **Personal operativo (recepción y staff)**: Usará el sistema para check-in/out, cambios y registro de consumos. Requiere una interfaz simple, mensajes comprensibles y flujos guiados. 

- **Administradores del sistema**: Configuran inventario, tarifas y políticas globales. Necesitan trazabilidad, control de cambios y auditoría.

- **Equipo de desarrollo y soporte**: Implementará y mantendrá la solución. Requiere límites claros, supuestos y criterios de éxito para tomar decisiones técnicas alineadas al negocio. 

== 1.4 Glosario
- **Reservación**: Proceso de apartar una habitación para fechas definidas; se confirma al realizar el pago completo.
- **Check-in**: Registro de entrada del huésped en el hotel, con validación de identidad y asignación de habitación.
- **Check-out**: Proceso de salida del huésped, que incluye la liquidación de consumos y la liberación de la habitación.
- **Overbooking**: Aceptar más reservaciones que habitaciones disponibles (hasta 10%) para cubrir cancelaciones/no-shows bajo control central.
- **Pago completo al reservar**: Cobro del 100% del importe de la estancia en el momento de confirmar.
- **Penalización por cancelación**: Cargo aplicado al cancelar una reservación confirmada, conforme a la política vigente.
- **Precios dinámicos**: Ajuste de tarifas en función de demanda, temporada, ocupación u otros factores del negocio.
- **Exclusión mutua**: Garantía de que una misma habitación no puede confirmarse a dos clientes a la vez.
- **Inventario**: Conjunto de habitaciones y, cuando aplique, servicios disponibles para reservación.
- **Latencia**: Tiempo que tarda el sistema en responder a una operación del usuario.
- **TPS (Transactions Per Second)**: Número de transacciones (por ejemplo, confirmaciones de reservación) procesadas por segundo.
- **QPS (Queries Per Second)**: Número de consultas de disponibilidad atendidas por segundo.
- **Idempotencia**: Propiedad que evita efectos duplicados ante reintentos (p. ej., no se generan cargos repetidos).
- **Trazabilidad**: Capacidad de seguir cada operación con identificadores y bitácoras para auditar y resolver disputas.
- **Política de cancelación**: Conjunto de reglas que define costos, plazos y condiciones para cancelar o modificar una reservación.
- **Degradación controlada**: Modo de operación con funciones limitadas para mantener el servicio activo durante picos o fallos parciales.

